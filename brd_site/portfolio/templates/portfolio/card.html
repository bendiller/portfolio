<!--The card template has two "modes" - summary (detail=False) and detailed (detail=True). They overlap a lot, so -->
<!--I chose to use a single template so that I could update the display for both at once (DRY).-->

<!--Summary mode is used on the index and tag pages, detailed mode is used on the detail pages. -->
<!--Summary mode leaves out some details about the project of course, and it also includes a link to a detailed -->
<!--representation in the footer.-->

{% if detail %}
{% else %}
{% endif %}

{% if p %}
{% if detail %}
<div class="tile is-parent is-9">
{% else %}
<div class="tile is-parent is-6">
{% endif %}

  <div class="tile is-child">
    <div class="card">
      <a href="{% url 'detail' p.name %}" class="has-text-black">
        <div class="card-header">
          <div class="card-header-title">
            <div class="content">
              <p class="title is-3">{{ p.name }}</p>
              <p class="subtitle is-italic is-size-6 has-text-grey">
                {{ p.start_date_as_str }} - {{ p.stop_date_as_str }}
              </p>
            </div>
          </div>
        </div>
      </a>

      <div class="card-content">
        <div class="content">
          <p class="subtitle">
            Relevant technologies:<br>
            {% for tag in p.techtag_set.all %}
              <span class="tag">
                <a href="{% url 'tag' tag.name %}">{{ tag.name }}</a>
              </span>
            {% endfor %}
          </p>

          <p class="subtitle">
          Project description:<br>
            <span class="is-size-6">{{ p.short_blurb }}</span>
          </p>


          {% if detail %}
            <p class="subtitle">
              Additional project details:
            </p>
              {{ project.long_blurb }}
          {% endif %}
        </div>


      </div>

      <div class="card-footer">
        {% if detail is not True %}
        <div class="card-footer-item">
          <a href="{% url 'detail' p.name %}" class="button is-info">
            Project Details
          </a>
        </div>
        {% endif %}
        <div class="card-footer-item">
          {% if p.code_link %}
          <a href="{{ p.code_link }}">View Code</a>
          {% else %}
          Code Available On Request
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endif %}